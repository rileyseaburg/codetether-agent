{
  "project": "ChronoForge",
  "feature": "Timeline Lineage Plumbing",
  "branch_name": "feature/timeline-lineage-plumbing",
  "version": "1.0",
  "user_stories": [
    {
      "id": "US-001",
      "title": "Add lineage fields to ChatEvent model",
      "description": "Add parent_timeline_id, fork_timestamp, and lineage_depth fields to the ChatEvent struct in src/event_stream/mod.rs with appropriate types and serde annotations",
      "acceptance_criteria": [
        "ChatEvent struct contains parent_timeline_id field (Option<String>)",
        "ChatEvent struct contains fork_timestamp field (Option<i64>)",
        "ChatEvent struct contains lineage_depth field (i64)",
        "Fields have correct serde Serialize/Deserialize annotations"
      ],
      "verification_steps": [],
      "passes": false,
      "priority": 1,
      "depends_on": [],
      "complexity": 2
    },
    {
      "id": "US-002",
      "title": "Add lineage fields to AuditEntry model",
      "description": "Add parent_timeline_id, fork_timestamp, and lineage_depth fields to the AuditEntry struct in src/audit/mod.rs with appropriate types and serde annotations",
      "acceptance_criteria": [
        "AuditEntry struct contains parent_timeline_id field (Option<String>)",
        "AuditEntry struct contains fork_timestamp field (Option<i64>)",
        "AuditEntry struct contains lineage_depth field (i64)",
        "Fields have correct serde Serialize/Deserialize annotations"
      ],
      "verification_steps": [],
      "passes": false,
      "priority": 1,
      "depends_on": [],
      "complexity": 2
    },
    {
      "id": "US-003",
      "title": "Update constructors/helpers with correct defaults",
      "description": "Update or create constructors/helpers for both ChatEvent and AuditEntry that set correct default values for lineage fields: parent_timeline_id=None, fork_timestamp=None, lineage_depth=0",
      "acceptance_criteria": [
        "ChatEvent constructor sets parent_timeline_id=None",
        "ChatEvent constructor sets fork_timestamp=None",
        "ChatEvent constructor sets lineage_depth=0",
        "AuditEntry constructor sets parent_timeline_id=None",
        "AuditEntry constructor sets fork_timestamp=None",
        "AuditEntry constructor sets lineage_depth=0"
      ],
      "verification_steps": [],
      "passes": false,
      "priority": 1,
      "depends_on": [
        "US-001",
        "US-002"
      ],
      "complexity": 3
    },
    {
      "id": "US-004",
      "title": "Add serde round-trip tests for ChatEvent",
      "description": "Add tests that serialize a ChatEvent with lineage fields to JSON and deserialize back, verifying all fields match",
      "acceptance_criteria": [
        "Test serializes ChatEvent with all lineage fields populated",
        "Test deserializes and verifies fields match original",
        "Test handles default values (None, 0) round-trip"
      ],
      "verification_steps": [],
      "passes": false,
      "priority": 1,
      "depends_on": [
        "US-001",
        "US-003"
      ],
      "complexity": 2
    },
    {
      "id": "US-005",
      "title": "Add serde round-trip tests for AuditEntry",
      "description": "Add tests that serialize an AuditEntry with lineage fields to JSON and deserialize back, verifying all fields match",
      "acceptance_criteria": [
        "Test serializes AuditEntry with all lineage fields populated",
        "Test deserializes and verifies fields match original",
        "Test handles default values (None, 0) round-trip"
      ],
      "verification_steps": [],
      "passes": false,
      "priority": 1,
      "depends_on": [
        "US-002",
        "US-003"
      ],
      "complexity": 2
    },
    {
      "id": "US-006",
      "title": "Add default value tests for lineage fields",
      "description": "Add tests verifying that lineage fields have correct default values when structs are constructed using default or constructor",
      "acceptance_criteria": [
        "ChatEvent defaults: parent_timeline_id=None, fork_timestamp=None, lineage_depth=0",
        "AuditEntry defaults: parent_timeline_id=None, fork_timestamp=None, lineage_depth=0"
      ],
      "verification_steps": [],
      "passes": false,
      "priority": 1,
      "depends_on": [
        "US-003"
      ],
      "complexity": 2
    },
    {
      "id": "US-007",
      "title": "Run cargo check and cargo test",
      "description": "Run cargo check on modified modules and execute cargo test to verify all changes compile and pass tests",
      "acceptance_criteria": [
        "cargo check passes for src/event_stream/mod.rs",
        "cargo check passes for src/audit/mod.rs",
        "cargo test passes for event_stream module",
        "cargo test passes for audit module"
      ],
      "verification_steps": [],
      "passes": false,
      "priority": 1,
      "depends_on": [
        "US-001",
        "US-002",
        "US-003",
        "US-004",
        "US-005",
        "US-006"
      ],
      "complexity": 1
    }
  ],
  "technical_requirements": [
    "Add parent_timeline_id: Option<String> to ChatEvent and AuditEntry",
    "Add fork_timestamp: Option<i64> to ChatEvent and AuditEntry",
    "Add lineage_depth: i64 to ChatEvent and AuditEntry",
    "Implement Default trait or constructor defaults for lineage fields",
    "Use serde derive macros for serialization/deserialization",
    "Place tests in same module files or test submodule"
  ],
  "quality_checks": {
    "typecheck": "cargo check --lib --tests",
    "test": "cargo test --lib --tests",
    "lint": null,
    "build": "cargo build --lib"
  },
  "created_at": "2026-02-16T19:46:31.787931090+00:00",
  "updated_at": "2026-02-16T19:46:31.787931090+00:00"
}